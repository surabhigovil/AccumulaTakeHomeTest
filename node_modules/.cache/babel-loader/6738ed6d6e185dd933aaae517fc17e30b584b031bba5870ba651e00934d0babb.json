{"ast":null,"code":"function isHoliday(date) {\n  // static holidays\n  const isDate = (d, month, date) => {\n    return d.getMonth() == month - 1 && d.getDate() == date;\n  };\n  if (isDate(date, 1, 1)) {\n    return \"New Year\";\n  } else if (isDate(date, 7, 4)) {\n    return \"Independence Day\";\n  } else if (isDate(date, 11, 11)) {\n    return \"Veterans Day\";\n  } else if (isDate(date, 12, 25)) {\n    return \"Christmas Day\";\n  }\n\n  // dynamic holidays\n  const isDay = (d, month, day, occurance) => {\n    if (d.getMonth() == month - 1 && d.getDay() == day) {\n      if (occurance > 0) {\n        return occurance == Math.ceil(d.getDate() / 7);\n      } else {\n        // check last occurance\n        let _d = new Date(d);\n        _d.setDate(d.getDate() + 7);\n        return _d.getMonth() > d.getMonth();\n      }\n    }\n    return false;\n  };\n  if (isDay(date, 1, 1, 3)) {\n    return \"MLK Day\";\n  } else if (isDay(date, 2, 1, 3)) {\n    return \"Presidents Day\";\n  } else if (isDay(date, 5, 1, -1)) {\n    return \"Memorial Day\";\n  } else if (isDay(date, 9, 1, 1)) {\n    return \"Labor Day\";\n  } else if (isDay(date, 10, 1, 2)) {\n    return \"Columbus Day\";\n  } else if (isDay(date, 11, 4, 4)) {\n    return \"Thanksgiving Day\";\n  }\n\n  // not a holiday\n  return \"\";\n}\nexport function findDaysToShip(product, date) {\n  let maxDaysToShip = product.maxBusinessDaysToShip;\n  const current = new Date(Date.parse(date)); //new Date();\n  let approxShipDate = new Date();\n  if (!product.shipOnWeekends) {\n    approxShipDate = getFinalShipDate(current, maxDaysToShip);\n  } else {\n    approxShipDate = new Date(approxShipDate.setDate(current.getDate() + maxDaysToShip - 1));\n  }\n  return approxShipDate;\n}\nfunction getFinalShipDate(d1, maxDaysToShip) {\n  while (maxDaysToShip > 0) {\n    var day = d1.getDay();\n    if (!(isHoliday(d1) || day === 6 || day === 0)) {\n      maxDaysToShip--;\n    }\n    d1.setDate(d1.getDate() + 1);\n  }\n  d1.setDate(d1.getDate() - 1); // Since we want to count the first date\n  return d1;\n}\nfunction deprecated_getFinalShipDate(d1, maxDaysToShip) {\n  let d2 = new Date(d1);\n  d2 = new Date(d2.setDate(d2.getDate()));\n  let dayCount = 0;\n  let holidayCount = 0;\n  while (maxDaysToShip > 0) {\n    var day = d1.getDay();\n    if (isHoliday(d1) || day === 6 || day === 0) {\n      ++holidayCount;\n    } else {\n      dayCount++;\n      maxDaysToShip--;\n    }\n    d1.setDate(d1.getDate() + 1);\n  }\n  d2 = new Date(d2.setDate(d2.getDate() + holidayCount + dayCount - 1));\n  return d2;\n}","map":{"version":3,"names":["isHoliday","date","isDate","d","month","getMonth","getDate","isDay","day","occurance","getDay","Math","ceil","_d","Date","setDate","findDaysToShip","product","maxDaysToShip","maxBusinessDaysToShip","current","parse","approxShipDate","shipOnWeekends","getFinalShipDate","d1","deprecated_getFinalShipDate","d2","dayCount","holidayCount"],"sources":["/Users/surabhi/Documents/AccumulaTest/shipping-tracker/src/utils/util.js"],"sourcesContent":["function isHoliday(date) {\n    \n    // static holidays\n    const isDate = (d, month, date) => {\n        return d.getMonth() == (month - 1) && d.getDate() == date;\n    };\n    if (isDate(date, 1, 1)) { return \"New Year\"; }\n    else if (isDate(date, 7, 4)) { return \"Independence Day\"; }\n    else if (isDate(date, 11, 11)) { return \"Veterans Day\"; }\n    else if (isDate(date, 12, 25)) { return \"Christmas Day\"; }\n\n    // dynamic holidays\n    const isDay = (d, month, day, occurance) => {\n        if (d.getMonth() == (month - 1) && d.getDay() == day) {\n            if (occurance > 0) {\n                return occurance == Math.ceil(d.getDate() / 7);\n            } else {\n                // check last occurance\n                let _d = new Date(d);\n                _d.setDate(d.getDate() + 7);\n                return _d.getMonth() > d.getMonth();\n            }\n        }\n        return false;\n    };\n    if (isDay(date, 1, 1, 3)) { return \"MLK Day\"; }\n    else if (isDay(date, 2, 1, 3)) { return \"Presidents Day\"; }\n    else if (isDay(date, 5, 1, -1)) { return \"Memorial Day\"; }\n    else if (isDay(date, 9, 1, 1)) { return \"Labor Day\"; }\n    else if (isDay(date, 10, 1, 2)) { return \"Columbus Day\"; }\n    else if (isDay(date, 11, 4, 4)) { return \"Thanksgiving Day\"; }\n\n    // not a holiday\n    return \"\";\n}\n\nexport function findDaysToShip(product, date) {\n    let maxDaysToShip = product.maxBusinessDaysToShip\n\n    const current = new Date(Date.parse(date)); //new Date();\n    let approxShipDate = new Date();\n    \n    if (!product.shipOnWeekends) {\n        approxShipDate = getFinalShipDate(current, maxDaysToShip);\n    } else {\n        approxShipDate = new Date(approxShipDate.setDate(current.getDate() + maxDaysToShip - 1));\n    }\n    \n    return approxShipDate;\n}\n\nfunction getFinalShipDate(d1, maxDaysToShip) {\n    \n    while ( maxDaysToShip > 0) {\n        var day = d1.getDay();\n        if(!(isHoliday(d1) || (day === 6 || day === 0))) {\n            maxDaysToShip--;\n        }\n\n        d1.setDate(d1.getDate() + 1);\n    }\n\n    d1.setDate(d1.getDate() - 1); // Since we want to count the first date\n    return d1;\n}\n\nfunction deprecated_getFinalShipDate(d1, maxDaysToShip) {\n    let d2 = new Date(d1);\n    d2 = new Date(d2.setDate(d2.getDate()));\n    let dayCount = 0;\n    let holidayCount = 0;\n    \n    while ( maxDaysToShip > 0) {\n        var day = d1.getDay();\n        if(isHoliday(d1) || (day === 6 || day === 0)) {\n            ++holidayCount\n        } else {\n            dayCount++;\n            maxDaysToShip--;\n        }\n        d1.setDate(d1.getDate() + 1);\n    }\n\n    d2 = new Date(d2.setDate(d2.getDate() + holidayCount + dayCount - 1));\n    return d2;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}