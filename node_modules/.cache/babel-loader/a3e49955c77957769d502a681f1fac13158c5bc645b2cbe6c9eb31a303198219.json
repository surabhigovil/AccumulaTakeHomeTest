{"ast":null,"code":"function isHoliday(date) {\n  // static holidays\n  const isDate = (d, month, date) => {\n    return d.getMonth() == month - 1 && d.getDate() == date;\n  };\n  if (isDate(date, 1, 1)) {\n    return \"New Year\";\n  } else if (isDate(date, 7, 4)) {\n    return \"Independence Day\";\n  } else if (isDate(date, 11, 11)) {\n    return \"Veterans Day\";\n  } else if (isDate(date, 12, 25)) {\n    return \"Christmas Day\";\n  }\n\n  // dynamic holidays\n  const isDay = (d, month, day, occurance) => {\n    if (d.getMonth() == month - 1 && d.getDay() == day) {\n      if (occurance > 0) {\n        return occurance == Math.ceil(d.getDate() / 7);\n      } else {\n        // check last occurance\n        let _d = new Date(d);\n        _d.setDate(d.getDate() + 7);\n        return _d.getMonth() > d.getMonth();\n      }\n    }\n    return false;\n  };\n  if (isDay(date, 1, 1, 3)) {\n    return \"MLK Day\";\n  } else if (isDay(date, 2, 1, 3)) {\n    return \"Presidents Day\";\n  } else if (isDay(date, 5, 1, -1)) {\n    return \"Memorial Day\";\n  } else if (isDay(date, 9, 1, 1)) {\n    return \"Labor Day\";\n  } else if (isDay(date, 10, 1, 2)) {\n    return \"Columbus Day\";\n  } else if (isDay(date, 11, 4, 4)) {\n    return \"Thanksgiving Day\";\n  }\n\n  // not a holiday\n  return \"\";\n}\nfunction getFinalShipDate(d1, maxDaysToShip) {\n  while (maxDaysToShip > 0) {\n    var day = d1.getDay();\n    if (!(isHoliday(d1) || day === 6 || day === 0)) {\n      maxDaysToShip--;\n    }\n    d1.setDate(d1.getDate() + 1);\n  }\n  d1.setDate(d1.getDate() - 1); // Since we want to count the first date\n  return d1;\n}\nexport function findDaysToShip(product, date) {\n  let maxDaysToShip = product.maxBusinessDaysToShip;\n  const selectedDate = new Date(date);\n  selectedDate.setDate(selectedDate.getDate() + 1);\n  let approxShipDate = new Date();\n  if (!product.shipOnWeekends) {\n    approxShipDate = getFinalShipDate(selectedDate, maxDaysToShip);\n  } else {\n    // TODO: need to fix this as we need pointer based apporoach\n    approxShipDate = new Date(approxShipDate.setDate(selectedDate.getDate() + maxDaysToShip - 1));\n  }\n  return approxShipDate;\n}\nexport function getLocalDate(date) {\n  var tzoffset = new Date(date).getTimezoneOffset() * 60000; //offset in milliseconds\n  var localISOTime = new Date(date - tzoffset).toISOString().slice(0, -1);\n  return localISOTime;\n}","map":{"version":3,"names":["isHoliday","date","isDate","d","month","getMonth","getDate","isDay","day","occurance","getDay","Math","ceil","_d","Date","setDate","getFinalShipDate","d1","maxDaysToShip","findDaysToShip","product","maxBusinessDaysToShip","selectedDate","approxShipDate","shipOnWeekends","getLocalDate","tzoffset","getTimezoneOffset","localISOTime","toISOString","slice"],"sources":["/Users/surabhi/Documents/AccumulaTest/shipping-tracker/src/utils/util.js"],"sourcesContent":["function isHoliday(date) {\n    \n    // static holidays\n    const isDate = (d, month, date) => {\n        return d.getMonth() == (month - 1) && d.getDate() == date;\n    };\n    if (isDate(date, 1, 1)) { return \"New Year\"; }\n    else if (isDate(date, 7, 4)) { return \"Independence Day\"; }\n    else if (isDate(date, 11, 11)) { return \"Veterans Day\"; }\n    else if (isDate(date, 12, 25)) { return \"Christmas Day\"; }\n\n    // dynamic holidays\n    const isDay = (d, month, day, occurance) => {\n        if (d.getMonth() == (month - 1) && d.getDay() == day) {\n            if (occurance > 0) {\n                return occurance == Math.ceil(d.getDate() / 7);\n            } else {\n                // check last occurance\n                let _d = new Date(d);\n                _d.setDate(d.getDate() + 7);\n                return _d.getMonth() > d.getMonth();\n            }\n        }\n        return false;\n    };\n    if (isDay(date, 1, 1, 3)) { return \"MLK Day\"; }\n    else if (isDay(date, 2, 1, 3)) { return \"Presidents Day\"; }\n    else if (isDay(date, 5, 1, -1)) { return \"Memorial Day\"; }\n    else if (isDay(date, 9, 1, 1)) { return \"Labor Day\"; }\n    else if (isDay(date, 10, 1, 2)) { return \"Columbus Day\"; }\n    else if (isDay(date, 11, 4, 4)) { return \"Thanksgiving Day\"; }\n\n    // not a holiday\n    return \"\";\n}\n\nfunction getFinalShipDate(d1, maxDaysToShip) {\n    \n    while ( maxDaysToShip > 0) {\n        var day = d1.getDay();\n        if(!(isHoliday(d1) || (day === 6 || day === 0))) {\n            maxDaysToShip--;\n        }\n\n        d1.setDate(d1.getDate() + 1);\n    }\n\n    d1.setDate(d1.getDate() - 1); // Since we want to count the first date\n    return d1;\n}\n\nexport function findDaysToShip(product, date) {\n    let maxDaysToShip = product.maxBusinessDaysToShip\n\n    const selectedDate = new Date(date);\n    selectedDate.setDate(selectedDate.getDate() + 1);\n\n    let approxShipDate = new Date();\n    \n    if (!product.shipOnWeekends) {\n        approxShipDate = getFinalShipDate(selectedDate, maxDaysToShip);\n    } else {\n        // TODO: need to fix this as we need pointer based apporoach\n        approxShipDate = new Date(approxShipDate.setDate(selectedDate.getDate() + maxDaysToShip - 1));\n    }\n    \n    return approxShipDate;\n}\n\nexport function getLocalDate(date) {\n    var tzoffset = new Date(date).getTimezoneOffset() * 60000; //offset in milliseconds\n    var localISOTime = (new Date(date - tzoffset)).toISOString().slice(0, -1);\n  \n    return localISOTime;   \n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}